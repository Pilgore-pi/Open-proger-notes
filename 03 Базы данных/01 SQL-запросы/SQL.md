> **SQL (structured query language)** — структурированный язык запросов, применяемый для управления базами данных.

> SQL ~ мультипарадигменный строго и сильно типизированный язык запросов не полный по Тьюрингу.

## Работа запросов

Запрос создает пользователь. Запрос интерпретируется системой управления базами данных во внутренние низкоуровневые команды. Затем эти команды исполняются, в результате чего выбираются данные, запрошенные пользователем

Путь запроса от пользователя к клиенту:

1. Пользователь
2. Клиент — способ введения запроса (поисковая строка)
3. СУБД
4. База данных — система хранения таблиц, связанных между собой

Операторы языка SQL делятся на следующие категории:

## [[DDL]] (Data Definition Language)

> **DDL** — язык управления данными. Операторы работают с целыми таблицами.

* CREATE — создание объекта в БД
* ALTER — изменение объекта
* DROP — удаление объекта

## [[DML]] (Data Manupilation Language)

> **DML** — операторы манипуляции данными \[[[CRUD]]\]

* **SELECT** — выбор данных с условием
* **INSERT** — добавление новых данных
* **UPDATE** — изменение данных
* **DELETE** — удаление данных

## DCL (Data Control Language)

> **DCL** — операторы определения доступа к данным

* **GRANT** — предоставление доступа
* **REVOKE** — отзыв выданного доступа
* **DENY** — запрет доступа

## TCL (Transaction Control Language)

> **TCL** — операторы транзакций

>[[03 Базы данных/01 SQL-запросы/Транзакции/Транзакции]] — последовательности логически связанных SQL-запросов, рассматриваемых как одно целое. Если все команды выполнены успешно, транзакция завершается, в противном случае откатывается назад.

* **BEGIN TRANSACTION** — начало транзакции
* **COMMIT TRANSACTION** — изменение команд внутри транзакции
* **ROLLBACK TRANSACTION** — откат транзакции
* **SAVE TRANSACTION** — промежуточная точка сохранения внутри транзакции

## Комментарии


| Диалект SQL    | Синтаксис однострочных ком. | Синтаксис многостр. ком. |
| -------------- | --------------------------- | ------------------------ |
| MS SQL Server  |                             |                          |
| PostreSQL      |                             |                          |
| SQL Lite       |                             |                          |
| MySQL          |                             |                          |
| Oracle, PL-SQL | `--`                        |                          |
|                |                             |                          |

## Литералы


|                       | MS SQL Server | MySQL | PostreSQL | SQL Lite | Oracle, PL-SQL |
| --------------------- | ------------- | ----- | --------- | -------- | -------------- |
| Строка                | `'string'`    |       |           |          |                |
| Локализованная строка | `N'строка'`   |       |           |          |                |
| Число                 |               |       |           |          |                |
| Дробное               |               |       |           |          |                |
| Логическое ИСТИНА     |               |       |           |          |                |
| Логическое ЛОЖЬ       |               |       |           |          |                |
| Дата                  |               |       |           |          |                |
| Время                 |               |       |           |          |                |
|                       |               |       |           |          |                |


### Строки

Строковые литералы заключаются в одинарные ковычки. Заключать текст в двойные ковычки строго не рекомендуется, так как разные базы данных (MySQl, PostgreSQL) могут воспринять такой литерал по-разному.
'my text literal'
N'Рашшиан литерал' — строковый литерал Unicode
### Числа

Никаких особенностей (5, 0, -60.548)
### Дата и время

date: 'YYYY-MM-DD' или 'DD-Mon-YYYY' (2020-02-22, 08-Jan-2000)
time: '10:28:17.987'
datetime:
'2008-10-23 10:37:22'
'08-Jan-2000 10:37:22'
'20081023103722'  ?
'2008/10/23 10.37.22'  ?
'2008\*10\*23\*10\*37\*22'  ?
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
UPDATE Orders SET OpenDate={d '1995-01-15'} WHERE OrderID=1023 UPDATE Orders SET OpenDate='15-Jan-1995' WHERE OrderID=1023
https://learn.microsoft.com/en-us/sql/odbc/reference/develop-app/date-time-and-timestamp-literals?view=sql-server-ver16
* NULL-литерал (NULL) — отсутствие значение. Это значение могут принимать только поля, допускающие NULL.

Примечание: точка с запятой в конце операции необязательна в том случае, если далее не идет никаких операций, в противном случае нужно разделять операции точкой с запятой.

Ключевые слова должны быть разделены хотя бы одним разделителем (пробел, перевод строки). Ключевые слова, параметры и др. можно разделять каким угодно количеством пробелов и переводов строк

#DB #SQL #SQL/Transact-SQL