
## Регистры бухгалтерии

Объект конфигурации Регистр бухгалтерии предназначен для описания структуры накопления данных, учет которых ведется исходя из некоторого плана счетов. На основе объекта конфигурации Регистр бухгалтерии платформа создает в базе данных таблицу, в которой будут накапливаться данные о хозяйственных операциях, отображаемых в бухгалтерском учете.

И регистр накопления, и регистр бухгалтерии решают одну и ту же задачу: накопление каких либо показателей в разрезе измерений. Различие заключается в том, что регистр накопления имеет жесткую структуру измерений и не поддерживает двойную запись, регистр бухгалтерии, наоборот, поддерживает двойную запись и возможность гибкой настройки измерений конечными пользователями. Эти различия обусловлены тем, что регистр накопления предназначен для организации ведения учета в какой-либо узкой области хозяйственной деятельности предприятия. Например, ведение взаиморасчетов, складской учет, учет денежных средств и так далее.

Измерения позволяют разделять ведение учета (например, используя измерение Организация, можно вести учет в разрезе нескольких юридических лиц).

Реквизиты служат признаком, по которому одни записи регистра можно отделить от других (например, в качестве реквизита может использоваться номер журнала, что позволит отбирать проводки, имеющие одинаковый смысл).

> Значительное отличие от регистра накопления заключается в том, что регистр бухгалтерии имеет жесткую связь с используемым планом счетов. Поэтому каждая запись регистра бухгалтерии содержит дополнительные поля, определяемые настройкой используемого плана счетов.

Кроме того, отличительной чертой регистра бухгалтерии является возможность поддержки механизма двойной записи, при которой каждая запись регистра содержит обязательные поля для указания счета дебета и счета кредита.

https://its.1c.ru/db/pubdevguideedt/content/689/hdoc/h689

Чтобы вести учет в различных разрезах, разработчик должен указать:
- план счетов для реквизита "Счет",
- максимальное количество субконто,
- тип значения субконто,
- план видов характеристик, который будет содержать виды субконто

## Структура Регистра бухгалтерии

> В базе SQL регистр бухгалтерии представляется таблицой движений и несколькими таблицами итогов. Таблица движений является самодостаточной и содержит все необходимые данные для формирования таблиц итогов

Таблицы итогов пересчитываются всякий раз, когда меняется содержимое таблицы движений. Для того, чтобы эта операция производилась эффективно, у таблицы итогов определен индекс, содержащий период и все измерения регистра.

Это накладывает ограничение на количество измерений у регистра, так как в MS SQL Server существует ограничение на количество полей входящих в индекс – не больше 16 полей. Таким образом, для регистра накопления можно определить 15 пользовательских измерений. Шестнадцатое поле занято системным измерением `Период`

При этом нужно учитывать, что каждое измерение составного типа занимает 3 поля вместо одного. Это не означает, что нельзя сделать регистр с количеством измерений больше 15, но при разработке такого регистра нужно учитывать этот факт и стараться в последние измерения, не попадающие в индекс, выносить измерения с маленьким количеством возможных значений. К таким значениям могут относиться перечисления, справочники с маленьким количеством элементов, или измерения количество значений, которых ограничено логикой конфигурации

| Структурный элемент | Описание                                                                                                                |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| Измерения           | Измерения — это составной ключ, состоящий из свойств разных типов и идентифицирующий запись регистра среди всех записей |
| Ресурсы             | Для регистра накопления — числовые значения... Для регистра сведений — переменная любого типа...                        |
| Реквизиты           |                                                                                                                         |
| Формы               | Формы набора записей регистра, формы списка и произвольные формы, подчиненные регистру                                  |
| Команды             | Подчиненные регистру, команды                                                                                           |
| Макеты              | Макеты регистра                                                                                                         |

| Стандартные реквизиты | Описание                                                                  |
| --------------------- | ------------------------------------------------------------------------- |
| Период                | **`Дата`** и время записи регистра                                        |
| Уточнение периода     | **`Дата`** и время записи регистра                                        |
| Регистратор           | **`ДокументСсылка.ИмяДокумента`** Источник движений                       |
| НомерСтроки           | Вместе с `Регистратором` идентифицирует запись регистра                   |
| Активность            | **`Булево`** Определяет будет ли учитываться запись регистра в его итогах |
| Счет                  | Ссылка на `ПланСчетов`. Реквизит существует только, если отключена корреспонденция |
| СчетДт                | ?? Реквизит существует только, если корреспонденция включена|
| СчетКт                | ?? Реквизит существует только, если корреспонденция включена|
| ВидСубконто1          |                                                                           |
| ВидСубконто2          |                                                                           |
| ВидСубконто3          |                                                                           |
| Субконто1             |                                                                           |
| Субконто2             |                                                                           |
| Субконто3             |                                                                           |

Регистр бухгалтерии можно представить как совокупность объектов:

- Регистры накопления, где для каждого счета имеющего уникальный набор субконто (область учета) определяется собственный регистр накопления
- Регистр накопления для учета по счетам без субконто
- Оборотный регистр для учета корреспонденций между счетами

## Пример

Представим, что у нас есть план счетов следующего содержания:

| Счет | Субконто1         | Субконто2     | Субконто3 |
|------|-------------------|---------------|-----------|
| 01   | Основные средства | Склады        |           |
| 20   | Подразделения     | Статьи затрат |           |
| 41   | Товары            | Партии        | Склады    |

Данную структуру можно представить в виде следующих регистров накопления:

| Измерения                   | Ресурсы           |
|-----------------------------|-------------------|
| ОсновныеСредства, Склад     | Сумма, Количество |
| Подразделения, СтатьиЗатрат | Сумма, Количество |
| Товар, Партия, Склад        | Сумма, Количество |
| Счет                        | Сумма, Количество |
| СчетДт, СчетКт              | Сумма, Количество (Оборотный) |

Разработчик может предусмотреть ведение в одном регистре бухгалтерии по одному счету несколько независимых параллельных учетов. Даная возможность задействуется с помощью признаков учета субконто и признака только обороты. Например, есть регистр бухгалтерии, в котором ведется суммовой и количественный учет, то есть у регистра определены два ресурса - сумма и количество. В плане счетов есть 10 счет, на котором ведется учет материалов. Данный учет ведется в разрезе материалов и складов, на которых эти материалы хранятся. В разрезе складов ведется только количественный учет. Для определения этого свойства у вида субконто Склады на 10 счете сбрасывается признак суммового учета. Тогда можно представить, что по 10 счету ведется два паралелльных учета:

| Измерения       | Ресурсы    |
|-----------------|------------|
| Материал        | Сумма      |
| Материал, Склад | Количество |

[Продолжение](https://its.1c.ru/db/metod8dev/content/2732/hdoc)

----

Регистр бухгалтерии это -- Прикладной объект, предназначенный для хранения данных, относящихся к бухгалтерскому учету. Позволяет вести многоуровневый и многомерный аналитический учет, учет по нескольким планам счетов. Возможно опциональное ведение количественного, суммового и валютного учета по отдельным разрезам аналитики и т.д.

Про различия бухгалтерских регистров и рег. накопления
https://its.1c.ru/db/metod8dev/content/2732/hdoc

# Регистр расчета

Объект конфигурации Регистр расчета предназначен для описания структуры накопления данных, являющихся результатами расчетов. На основе объекта конфигурации Регистр расчета платформа создает в базе данных таблицы, в которых будут накапливаться данные, формируемые различными объектами базы данных.

Отличительной особенностью регистра расчета является то, что он не предназначен для интерактивного редактирования пользователем. Разработчик может при необходимости предоставить пользователю возможность редактировать регистр расчета, но предназначение регистра расчета заключается в том, чтобы его модификация производилась на основе алгоритмов работы объектов базы данных, а не в результате непосредственных действий пользователя.

Как и другие регистры, регистр расчета имеет:

- **ресурсы**, в которых хранит числовые данные;
- **измерения**, в разрезе которых можно получать значения ресурсов регистра;
- **реквизиты**, которые характеризуют каждую запись регистра расчета.

Отличительными же особенностями регистра расчета являются его периодичность, возможность использования механизмов вытеснения по периоду действия и зависимости по базовому периоду, а также связь с планом видов расчета. Рассмотрим все эти особенности по порядку.

...

## Структура регистра расчета


| Структурный элемент | Описание                                                                                                                |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| Измерения           | Измерения — это составной ключ, состоящий из свойств разных типов и идентифицирующий запись регистра среди всех записей |
| Ресурсы             | Для регистра накопления — числовые значения... Для регистра сведений — переменная любого типа...                        |
| Реквизиты           |                                                                                                                         |
| Формы               | Формы набора записей регистра, формы списка и произвольные формы, подчиненные регистру                                  |
| Команды             | Подчиненные регистру, команды                                                                                           |
| Макеты              | Макеты регистра                                                                                                         |

| Стандартные реквизиты | Описание                                                                  |
| --------------------- | ------------------------------------------------------------------------- |
| Период                | **`Дата`** и время записи регистра                                        |
| Уточнение периода     | **`Дата`** и время записи регистра                                        |
| Регистратор           | **`ДокументСсылка.ИмяДокумента`** Источник движений                       |
| НомерСтроки           | Вместе с `Регистратором` идентифицирует запись регистра                   |
| Активность            | **`Булево`** Определяет будет ли учитываться запись регистра в его итогах |
| Счет                  | **`Дата`** и время записи регистра                                        |
| ВидСубконто1          |                                                                           |
| ВидСубконто2          |                                                                           |
| ВидСубконто3          |                                                                           |
| Субконто1             |                                                                           |
| Субконто2             |                                                                           |
| Субконто3             |                                                                           |


#1С #1С/Конфигурация/Регистры
