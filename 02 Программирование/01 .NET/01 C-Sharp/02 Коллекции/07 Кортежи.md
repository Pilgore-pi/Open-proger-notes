Назад: 
Далее: 

> **Кортежи** — это упорядоченные наборы объектов. Кортежи всегда имеют фиксированную длину. Нельзя пересоздать кортеж с другим количеством параметров, так как считается, что это будет уже другой тип. В действительности, кортежи — это обобщенные классы и структуры.

> Количество элементов кортежа неограничено, однако в старых версиях .NET максимальное число элементов кортежа было `8`

## Именование элементов

По умолчанию элементы кортежа именуются согласно шаблону: `Item<N>`, где `N` начинается с `1`

Имена можно задавать при объявлении:

```cs
(string str, int num) pair = ("One", 13);
pair.num = 30;
pair.str += "-Two";

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
(long, int, float) nums = (big: 40465501, ordinary: 93, single: 51.1f);
nums.num = 30;
```

Вывод из имен соответствующих переменных:

```cs
double sum = 4.5;
int count  = 3;

var tuple = (sum, count);
tuple.sum += 10;
```

Можно комбинировать любые способы именования полей кортежа

Имена по умолчанию (`ItemN`) всегда доступны для использования, независимо от того, были ли заданы кастомные имена

```cs
var a = 1;
var t = (a, b: 2, 3);
t.Item1 = 3;
t.b = 4;
t.Item3 = 5;
```

> Имена полей не учитываются при присваивании кортежа и сравнении кортежей на равенство

## Сравнение кортежей

## Декомпозиция кортежа

Это операция, которая позволяет извлекать из кортежа все элементы за одну операцию. Существует несколько видов деконструкции (декомпозиции) кортежей:

1) С явным указанием типов:

```csharp
(double R, double Phi) = ToPolar(10, 20);
R *= 2;
Phi /= 4;
```

2) С использованием ключевого слова var:

```csharp
var (R, Phi) = ToPolar(10, 20);
```

3) Инициализация объявленных переменных:

```csharp
string city = "Raleigh";
int population = 458880;
double area = 144.8;

(city, population, area) = QueryCityData("New York City");
```

4) Смешанный способ (C# 10):

```csharp
string city = "Raleigh";
int population = 458880;

(city, population, double area) = QueryCityData("New York City");
```

### Декомпозиция с отбрасыванием

```csharp
var (_, _, pop1, _, pop2) = GetData("New York City", 1960, 2010);
```

## Перегрузка декомпозиции

Для пользовательских типов можно переопределить метод декомпозиции, который должен возвращать `void` и все его параметры должны быть с модификатором `out`, а имя метода должно быть "`Deconstruct`".

```csharp
class Person
{
	//...
	public void Deconstruct(
      out string fname, out string mname, out string lname)
	{
		fname = FirstName;
		mname = MiddleName;
		lname = LastName;
	}
}
```

#C-Sharp #C-Sharp/Collections