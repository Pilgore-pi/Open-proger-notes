
## Задача

***Сложность:** средняя*

Допустим есть 2 репозитория: созданный нами в [[Задача 01. Создание удаленного репозитория|задаче 1]] репозиторий с хранилищем Obsidian и небольшой репозиторий, существующий на GitHub с заметками по Java и 1С:Предприятие.
Задача заключается в слиянии этих репозиториев и удаление малого репозитория (назовем его `my-notes`). Репозиторий `my-notes` перед окончательным слиянием с `ProgerNotes`, нужно передать в новую ветку `ProgerNotes/new-notes`. Затем нужно объединить все ветки `ProgerNotes` в одну ветку `master`

Структура `my-notes`:

- `1С Предприятие/Интеграция/`
    - `Работа с DBF (XBase).md`
- `Java/`
    - `Графика в Java/`
        - `<2 файла MarkDown>`
    - `<6 файлов конспектов MarkDown по Java>`

В репозитории `ProgerNotes` (из [[Задача 01. Создание удаленного репозитория|задачи 1]]) есть каталог с конспектами по 1С, но нет заметок по Java, поэтому конспекты 1С нужно слить с уже существующими, а заметки по Java добавить.

В `ProgerNotes` Заметки по программированию находятся в каталоге "`02 Программирование/`", заметки по 1С в: "`1С - Предприятие/`", а заметки по Java нужно расположить в новом каталоге внутри "`02 Программирование/`"

## Алгоритм действий

**Загрузить репозиторий `my-notes` как новую ветку**

1. Создать репозиторий с приведенной структурой и загрузить на GitHub (по аналогии с [[Задача 01. Создание удаленного репозитория|заданием 1]]), если подобного репозитория еще нет
2. Добавить ссылку на репозиторий `my-notes` в локальный репозиторий `ProgerNotes`
3. Загрузить изменения из `my-notes`
4. Создать новую ветку, куда будут загружены файлы `my-notes`
5. Загрузить полученные данные в новую ветку
6. \[Опционально\] Отправить изменения на репозиторий GitHub (`ProgerNotes`)

**Объединить ветки**

1. Перейдем на ветку, которую хотим слить в основную ветку
2. Создать в ветке, которую мы хотим слить, каталог с тем же расположением, что и в основной ветке
3. Переместим все файлы в этот каталог
4. Слить ветки
5. Коммит
6. Пуш изменений

## Пошаговое руководство

### 1 Загрузка репозитория в новую ветку

- Создаем репозиторий `my-notes` или используем готовый репозиторий
- Добавляем ссылку на этот репозиторий:

```git
git remote add my-notes https://github.com/Hero/my-notes
```

- Получаем изменения без автоматического слияния

```git
git fetch my-notes
```

- Создаем новую ветку `new-notes` на основе полученных изменений

```git
git checkout -b new-notes my-notes/main
```

**Пояснение команды:**

Команда `git checkout` совершает переход на указанную ветку, а атрибут `-b` говорит о том, что перед переходом на указанную ветку ее нужно сначала создать, то есть команду `git checkout -b new-notes` можно интерпретировать так:

```git
git branch new-notes
git checkout new-notes
```

В приведенном примере последним аргументом команды является адрес ветки в репозитории `my-notes`. Само наличие последнего аргумента говорит о том, что ветка должа заполняться данными из `my-notes/main`

- Отправляем изменения на GitHub

```git
git push -u ProgerNotes new-notes
```

Обратите внимание, никаких коммитов мы явно не совершали

### 2 Слияние веток

Переходим на ветку ??????

```git
git checkout ?????
```

Создаем каталог "..." локально в проводнике, в консоли Git или на GitHub

```git
mkdir -p "..."
```

Перемещаем всё в этот каталог (не перемещаем каталог `.git`)

```git
mv * "..."
```

```git
git merge my-notes --allow-unrelated-histories
git add --all
git commit -m "&&&"
git push origin 
```


#Git #GitHub #Git/Branches
