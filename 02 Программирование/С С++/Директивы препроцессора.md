
Директивы препроцессора в C и C++ — это специальные команды, начинающиеся с символа решетки (#), которые выполняются препроцессором до этапа компиляции. Они служат для предварительной обработки исходного кода, такой как включение файлов, определение макросов, условная компиляция и другие функции управления текстом программы. Ниже приведен подробный конспект основных директив и их применения.

## Основные директивы препроцессора

### `#include`

Вставляет содержимое указанного файла в место вызова директивы. Есть две формы:
- `#include <filename>` — подключение системных/стандартных заголовочных файлов.
- `#include "filename"` — подключение файлов из текущей директории проекта или указанных путей.

### `#define`

Определяет макро или символическую константу. Синтаксис:

```c
#define Идентификатор Замена
```

После определения все вхождения идентификатора в коде будут заменены на указанное значение. Используется для создания макросов и постоянных значений.

### `#undef`

Отменяет ранее сделанное определение идентификатора, позволяя переопределять значения или исключать макросы.

### Условная компиляция

Позволяет включать или исключать части кода на этапе препроцессинга, управляя компиляцией в зависимости от условий.

- `#ifdef Идентификатор` — если идентификатор определен, то следующий код компилируется.
- `#ifndef Идентификатор` — если идентификатор не определен, то следующий код компилируется.
- `#if Константное_выражение` — компилирует код, если выражение истинно (не 0).
- `#else` — альтернатива, если условие не выполняется.
- `#elif` — объединение `else` и `if` для проверки другого условия.
- `#endif` — завершает блок условной компиляции.

### `#line`

Позволяет переопределить номер строки и имя файла для компилятора и отладчиков, полезно для генераторов кода.

### `#error`

Выводит сообщение об ошибке и прекращает компиляцию, если возникло критическое условие.

### `#pragma`

Специфическая для компилятора директива, которая предоставляет ему специальные инструкции (например, управление предупреждениями).

## Особенности и применение

- Директивы не заканчиваются символом `;`.
- Препроцессор выполняет прямую текстовую замену и вставку.
- Условная компиляция часто используется для компиляции под разные платформы или режимы отладки.
- Header guards применяются для предотвращения повторного включения заголовочных файлов:

```c
#ifndef HEADER_FILE_NAME
#define HEADER_FILE_NAME
// содержимое файла
#endif
```

## Краткий каталог директив препроцессора с назначением

| Директива | Назначение                            |
| --------- | ------------------------------------- |
| `#include`  | Включение содержимого файла           |
| `#define`   | Определение макроса или константы     |
| `#undef`   | Отмена определения макроса            |
| `#ifdef`    | Компиляция, если макрос определен     |
| `#ifndef`  | Компиляция, если макрос не определен  |
| `#if`       | Компиляция, если условие истинно      |
| `#else`     | Альтернативный код для `#if`, `#ifdef`    |
| `#elif`     | Альтернатива `#else` с условием         |
| `#endif`    | Завершение условного блока            |
| `#line`     | Изменение номера строки и имени файла |
| `#error`    | Генерация ошибки препроцессора        |
| `#pragma`   | Специфические команды компилятора     |

Этот набор директив обеспечивает гибкое управление исходным кодом и позволяет создавать переносимый, адаптируемый и управляемый код в проектах на C и C++.[1][2][3][4][5]

[1](https://ravesli.com/urok-22-preprotsessor-direktivy/)
[2](https://prog-cpp.ru/c-directives/)
[3](https://otus.ru/journal/direktivy-preprocessora-v-c-c/)
[4](https://it-ouroboros.com/programming_c_and_cpp/c-cpp-direktivy-preprocessora/)
[5](https://learn.microsoft.com/ru-ru/cpp/preprocessor/preprocessor-directives?view=msvc-170)
[6](https://learn.microsoft.com/ru-ru/cpp/preprocessor/hash-define-directive-c-cpp?view=msvc-170)
[7](https://alexgyver.ru/lessons/preprocessor/)
[8](http://aco.ifmo.ru/el_books/applied_programming/lectures/part1-1.html)
[9](http://mycpp.ru/cpp/book/c01_3.html)
[10](https://studfile.net/preview/6304069/page:22/)



#C #C-Plus-Plus