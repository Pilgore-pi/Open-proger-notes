
**Процессор (CPU, Central Processing Unit, ЦПУ)** — центральное процессорное устройство, интегральная схема, исполняющая машинные инструкции программ. Процессор состоит из миллиардов транзисторов, сопоставимых с молекулами ДНК, которые объединяются в логические вентили, позволяющие выполнять арифметические операции (сложение, умножение), сравнение чисел и логические операции. Данные для обработки берутся из оперативной памяти, однако из-за её относительной медлительности используется кэш-память для ускорения доступа к часто используемым данным.

## Архитектуры процессоров

Существуют три основных архитектуры процессоров, определяющие набор поддерживаемых машинных команд и совместимость с программным обеспечением:

1. **x86/x64** — архитектура для персональных компьютеров (Intel, AMD). Поддерживает 32-битные (x86) и 64-битные (x64) инструкции

2. **ARM** — архитектура для мобильных устройств, планшетов и встраиваемых систем (Apple, Qualcomm, MediaTek). Характеризуется низким энергопотреблением

3. **AVR** — архитектура для микроконтроллеров и электронных устройств (Atmel). Используется в IoT (интернет вещей) и встраиваемых системах

> **Разрядность** — величина, определяющая размер машинного слова (максимальное количество бит, обрабатываемое процессором за один такт). В современных ПК используются 64-битные процессоры с размером регистра 64 бита

## Кэш-память

Оперативная память значительно медленнее процессора, поэтому для сокращения простоев используется многоуровневая кэш-память:

> **Кэш** — сверхбыстрая память внутри процессора, хранящая копии часто используемых данных из оперативной памяти для ускорения доступа

**Уровни кэша (от быстрого к медленному):**

- **L1 (Level 1)** — самый быстрый, объём 32-64 КБ на ядро, скорость ~120 ГБ/с, разделён на кэш инструкций (I-cache) и кэш данных (D-cache)

- **L2 (Level 2)** — средний, объём 256-512 КБ на ядро, скорость ~60 ГБ/с, обычно приватный для каждого ядра

- **L3 (Level 3)** — самый объёмный, объём 4-32 МБ, скорость ~20 ГБ/с, общий для всех ядер процессора

- **L4 (Level 4)** — редко встречается, используется в некоторых серверных и мобильных процессорах

Принцип работы: при обращении процессора к памяти сначала проверяется L1, затем L2, затем L3, и только потом оперативная память. Чем больше кэш, тем реже процессор обращается к медленной оперативной памяти, что повышает производительность.

## Регистры процессора

> **Регистр** — сверхбыстрая оперативная память (СОЗУ) внутри процессора, предназначенная для хранения промежуточных результатов вычислений и управления работой CPU

Регистры представляют собой цифровые электронные схемы для временного хранения двоичных чисел. Доступ к значениям в регистрах в несколько раз быстрее, чем доступ к ячейкам оперативной памяти (даже кэшированным), однако суммарный объём регистров минимален (обычно 64-256 байт), что несоизмеримо с объёмом оперативной памяти (4-64 ГБ).

**Типы регистров:**

- **Регистры общего назначения** — доступны программам для хранения данных и адресов
- **Управляющие регистры** — доступны только операционной системе для управления режимом работы CPU
- **Специальные регистры** — счётчик команд (Program Counter), указатель стека (Stack Pointer) и другие

## Тактовая частота и множители

> **Тактовая частота** — количество операций, выполняемых процессором в секунду, измеряется в герцах (Гц, МГц, ГГц)

Тактовая частота процессора рассчитывается по формуле:

```text
Тактовая_частота = Базовая_частота × Множитель
```

**Компоненты формулы:**

1. **Базовая частота (BCLK)** — опорная частота системной шины, обычно 100 МГц (Intel) или 100 МГц (AMD), устанавливается в BIOS и редко меняется

2. **Множитель (CPU Multiplier)** — коэффициент увеличения базовой частоты, каждое ядро может использовать свой множитель для динамической подстройки частоты под нагрузку

3. **Напряжение ядра (Core Voltage)** — электрическое напряжение, подаваемое на процессор. Повышенное напряжение необходимо для стабильной работы на высоких частотах, но увеличивает тепловыделение и деградацию кристалла

**Динамическая подстройка частоты:**

- **Intel Turbo Boost** — автоматическое повышение множителя при высокой нагрузке и низкой температуре
- **AMD Precision Boost** — аналогичная технология для процессоров Ryzen
- **Понижение частоты** — при низкой нагрузке частота снижается для экономии энергии
## Многопоточность и гиперпоточность

> **Поток (Thread)** — последовательность инструкций, выполняемых процессором. Один процесс может состоять из нескольких потоков, выполняемых параллельно на разных ядрах или поочередно на одном ядре

> **Ядро (Core)** — физическая единица процессора, способная независимо выполнять инструкции. Каждое ядро имеет собственный набор регистров, L1 кэш и контроллер прерываний

**Гиперпоточность (Hyper-Threading, HTT)** — технология Intel, позволяющая одному физическому ядру выполнять два потока одновременно:

- Каждое физическое ядро содержит два набора регистров и два контроллера прерываний
- Второй поток использует ресурсы ядра в моменты, когда первый поток ждёт данных из памяти
- Не может полностью заменить физическое ядро, эффективность зависит от типа программы (обычно 20-30% прирост производительности)

**Логические процессоры:**

Операционная система и программы видят логические процессоры (ядра + потоки). Например, процессор с 4 физическими ядрами и гиперпоточностью отображается как 8 логических процессоров.

| Конфигурация | Физические ядра | Логические процессоры |
| :----------- | :--------------- | :-------------------- |
| 4C/4T        | 4                | 4                     |
| 4C/8T        | 4                | 8 (с гиперпоточностью) |
| 8C/16T       | 8                | 16 (с гиперпоточностью) |

## Прерывания и исключения

> **Прерывание** — сигнал, приостанавливающий текущий процесс для выполнения более приоритетного обработчика прерываний. По завершении обработчика выполнение прерванного процесса продолжается

**Типы прерываний:**

1. **Программные прерывания** — генерируются самой программой через специальные инструкции (INT)

2. **Аппаратные прерывания** — генерируются внешними устройствами (клавиатура, мышь, сетевая карта, таймер)

3. **Исключения (Exception)** — генерируются самим процессором при обнаружении ошибок:
   - Деление на ноль
   - Переполнение регистра
   - Выход за пределы памяти (Page Fault)
   - Ошибка защиты памяти
   - Недопустимая инструкция
   - Отладочное исключение (Breakpoint)

4. **Немаскируемые прерывания (NMI)** — критические ошибки оборудования (ошибки ОЗУ, отказ питания), не могут быть отключены программой

## Уровни привилегий и режимы работы

Процессор поддерживает несколько уровней доступа для защиты системы:

**Уровни привилегий (Ring levels):**

- **Ring 0 (Kernel Mode)** — полный контроль над процессором, доступ ко всем инструкциям и памяти. Используется операционной системой и драйверами

- **Ring 1-2** — промежуточные уровни, редко используются в современных ОС

- **Ring 3 (User Mode)** — ограниченный доступ, используется прикладными программами. Доступ к защищённым инструкциям и памяти других процессов запрещён

При попытке прикладной программы выполнить привилегированную операцию генерируется исключение, и управление передаётся ОС.

**Режимы работы:**

- **Real Mode** — режим реальной адресации, используется при загрузке компьютера (BIOS)
- **Protected Mode** — защищённый режим с виртуальной памятью и многозадачностью (современные ОС)
- **Long Mode (x64)** — 64-битный режим для процессоров x86-64

## Процессы и потоки в ОС

При запуске компьютера BIOS загружает первый сектор загрузочного диска в память и передаёт управление процессору, который начинает выполнять операционную систему.

> **Процесс** — экземпляр выполняемой программы с собственным адресным пространством памяти, регистрами и ресурсами

> **Поток** — единица выполнения внутри процесса, разделяющая память и ресурсы с другими потоками процесса

**Организация памяти для процессов:**

Операционная система разделяет память между ОС (привилегированная) и прикладными программами (пользовательская). Каждому процессу выделяется отдельное виртуальное адресное пространство, изолированное от других процессов.

**Многозадачность:**

Процессы и потоки не выполняются одновременно (на однопроцессорной системе). Операционная система использует вытесняющую многозадачность:

1. Процесс выполняется некоторое время (квант времени, обычно 10-100 мс)
2. ОС сохраняет состояние процесса (регистры, счётчик команд, флаги)
3. ОС переключается на другой процесс
4. При следующем переключении на первый процесс его состояние восстанавливается

На многопроцессорных системах разные потоки могут выполняться на разных ядрах действительно одновременно.

## Процессоры Intel

### Поколения процессоров Intel

| Поколение | Кодовое имя | Год | Сокет | Архитектура | Примеры чипсетов |
| :-------- | :---------- | :-- | :---- | :---------- | :--------------- |
| 1         | Westmere    | 2010 | LGA1156 | Nehalem | H55, H57, P55, Q57 |
| 2         | Sandy Bridge | 2011 | LGA1155 | Sandy Bridge | H61, H67, P67, Z68 |
| 3         | Ivy Bridge | 2012 | LGA1155 | Ivy Bridge | B75, H77, Z77 |
| 4         | Haswell | 2013 | LGA1150 | Haswell | H81, H87, Z87 |
| 5         | Broadwell | 2014 | LGA1150 | Broadwell | H97, Z97 |
| 6         | Skylake | 2015 | LGA1151 | Skylake | H110, H170, Z170 |
| 7         | Kaby Lake | 2017 | LGA1151 | Kaby Lake | H110, H270, Z270 |
| 8         | Coffee Lake | 2017 | LGA1151v2 | Coffee Lake | Z370 |
| 9         | Coffee Lake Refresh | 2018 | LGA1151v2 | Coffee Lake | H310, H370, Z370, Z390 |
| 10        | Comet Lake | 2020 | LGA1200 | Comet Lake | H410, H470, Z490 |
| 11        | Rocket Lake | 2021 | LGA1200 | Cypress Cove | H510, Z590 |
| 12        | Alder Lake | 2021 | LGA1700 | Golden Cove + Gracemont | H670, Z690 |
| 13        | Raptor Lake | 2022 | LGA1700 | Raptor Cove + E-cores | H770, Z790 |
| 14        | Raptor Lake Refresh | 2023 | LGA1700 | Raptor Cove + E-cores | H770, Z790 |

**Важные особенности:**

- 2-е поколение (Sandy Bridge) — последнее, где крышка процессора фиксировалась припоем; с 3-го поколения используется термопаста
- 8-е поколение (Coffee Lake) — несовместимо с сокетом LGA1151v1 (6-7 поколений), хотя физически похожи
- 12-е поколение (Alder Lake) — первое поколение с гибридной архитектурой (P-cores + E-cores)
- Поддержка 128 ГБ оперативной памяти начиная с 9-го поколения

### Наименования процессоров Intel

**Пример: `Intel Core i9-13900KS`**

| Компонент | Описание                                        |
| :-------- | :---------------------------------------------- |
| Intel     | Производитель                                   |
| Core      | Потребительская линейка                         |
| i9        | Серия (i3 < i5 < i7 < i9)                       |
| 13        | Поколение                                       |
| 900       | Номер модели в поколении                        |
| K         | Индекс/суффикс (K - разблокированный множитель) |

#### Индексы процессоров Intel

| Индекс | Описание |
| :----- | :------- |
| **K** | Разблокированный множитель, поддержка разгона |
| **KF** | Разблокированный множитель без встроенной графики |
| **X** | Экстремальный (X-series), высокопроизводительный, разблокированный множитель |
| **F** | Без встроенного видеочипа (требуется дискретная видеокарта) |
| **T** | Высокоэнергоэффективный, низкое потребление (~35W TDP) |
| **S** | Энергоэффективный, сниженное энергопотребление |
| **H** | Мобильный, улучшенное встроенное графическое ядро |
| **U** | Ультрамобильный, низкое потребление (~15W TDP) |
| **Y** | Экстремально низкое потребление (~11.5W TDP) |
| **P** | Мобильный, без автоматического разгона (Turbo Boost) |
| **Q** | Четырёхъядерный (устаревший индекс) |
| **M** | Мобильный (устаревший индекс) |
| **E** | Стандартный, вариант для встраиваемых систем |
| **R** | Встраиваемый, BGA корпус, производительная графика |

## Процессоры AMD

Компания AMD развилась из Intel благодаря законодательству США, которое негативно относилось к монополиям. Но позже Intel перестал делиться технологиями с AMD, и на сегодняшний день это две независимо развивающихся компании.

До 2011 года были выпущены процессоры пяти поколений 5-10 (K5-K10). В октябре 2011 года была создана новая архитектура – Bulldozer. В то время, как у Intel было 2-е поколение. Позже вышло новое 16 поколение с архитектурой Zen.

**`AMD Ryzen 5 2600`**

- `AMD` — производитель
- `Ryzen` — линейка
- `5` — серия
- `2` — поколение
- `600` — номер

| Поколение | Кодовое имя | Год  | Сокет | Ядра/Потоки  | Примеры                      |
| :-------- | :---------- | :--- | :---- | :----------- | :--------------------------- |
| 1000      | Zen         | 2017 | AM4   | 4-16C/8-32T  | Ryzen 5 1600, Ryzen 7 1700   |
| 2000      | Zen+        | 2018 | AM4   | 4-16C/8-32T  | Ryzen 5 2600, Ryzen 7 2700X  |
| 3000      | Zen 2       | 2019 | AM4   | 6-16C/12-32T | Ryzen 5 3600, Ryzen 9 3900X  |
| 5000      | Zen 3       | 2020 | AM4   | 6-16C/12-32T | Ryzen 5 5600X, Ryzen 9 5950X |
| 7000      | Zen 4       | 2022 | AM5   | 8-16C/16-32T | Ryzen 5 7600, Ryzen 9 7950X  |
| 9000      | Zen 5       | 2024 | AM5   | 8-16C/16-32T | Ryzen 5 9600X, Ryzen 9 9950X |

**Особенности:**

- 1000-5000 серии используют сокет AM4 с хорошей обратной совместимостью (4 поколения)
- 7000+ серии используют новый сокет AM5 с архитектурой Zen 4
- Серия Threadripper (TR4, sTRX4) предназначена для энтузиастов и рабочих станций (до 64 ядер)

### Наименования процессоров AMD Ryzen

**Пример: `AMD Ryzen 9 5950X`**

| Компонент | Описание                             |
| :-------- | :----------------------------------- |
| AMD       | Производитель                        |
| Ryzen     | Потребительская линейка              |
| 9         | Серия (3 < 5 < 7 < 9)                |
| 5         | Поколение                            |
| 950       | Номер модели                         |
| X         | Суффикс (X - высокопроизводительный) |

#### Суффиксы процессоров AMD Ryzen

| Суффикс | Описание |
| :------ | :------- |
| **X** | Высокопроизводительный, повышенная частота, разблокированный множитель |
| **XT** | Экстремальный, ещё более высокая частота, чем X |
| **GE** | Встроенная графика, энергоэффективный |
| **G** | Встроенная графика (Radeon) |
| **U** | Мобильный, ультрамобильный, низкое потребление |
| **H** | Мобильный, высокопроизводительный |
| **HX** | Мобильный, экстремальный, разблокированный множитель |
| **PRO** | Профессиональный, для рабочих станций |

## Основные характеристики процессора

При выборе процессора необходимо учитывать следующие параметры:

| Характеристика | Описание |
| :------------- | :------- |
| **Сокет** | Тип разъёма на материнской плате (LGA1700, AM5 и т.д.) |
| **Ядра / Потоки** | Количество физических ядер и логических потоков (например, 8C/16T) |
| **Базовая / Turbo частота** | Базовая частота и максимальная частота в режиме разгона (ГГц) |
| **Кэш L1 / L2 / L3** | Объёмы кэш-памяти каждого уровня (МБ) |
| **Техпроцесс** | Размер транзистора в нанометрах (нм): 7nm, 5nm, 3nm и т.д. Меньше — эффективнее |
| **TDP (Thermal Design Power)** | Максимальное тепловыделение в ватах (Вт). Определяет требования к охлаждению |
| **Максимальная температура** | Температура срабатывания защиты от перегрева (обычно 90-100°C) |
| **Встроенная графика** | Наличие встроенного видеочипа (Intel UHD/Iris, AMD Radeon) |
| **Поддерживаемая память** | Тип (DDR4, DDR5), максимальный объём (ГБ), максимальная частота (МГц) |
| **Множитель** | Разблокирован ли множитель для разгона (K-серия Intel, X-серия AMD) |

## Интересные факты

- **Cerebro CS-1** — суперкомпьютерный процессор с 400 000 ядер и 1.2 триллионами транзисторов, потребляет 20 кВт, изготовлен по 16 нм техпроцессу, содержит 18 ГБ кэш-памяти L2

- Современные процессоры содержат 10-50 миллиардов транзисторов на кристалле размером 1-2 см²

- Размер одного транзистора в процессорах 3 нм составляет примерно 48 атомов кремния в ширину

#Компьютерная_инженерия