
## Упаковка и распаковка объектов

> **Упаковка** – это операция преобразования значимого типа к object или к интерфейсу, который реализован данным значимым типом. При этом переменная копируется в специальный объект, который помещается в «кучу»

> **Распаковка** – это явное извлечение значимого типа из ссылочного объекта

```cs
int number = 228;

object o = number; //упаковка (boxing)

int i = (int)o; //распаковка (unboxing)

...

object o = 700u;

//int i = (int)o; – ошибка

int i = (int)(uint)o; //нет ошибки
```

Операции упаковки и распаковки являются дорогими операциями с точки зрения производительности

Если происходит преобразование ссылочных типов, то затрачивается меньше ресурсов, так как преобразование допускается только между совместимыми типами, то есть между типами, построенными по одному шаблону (интерфейс или класс)

Упаковка может неявно происходить в следующих случаях:

- При вызове метода у значимого типа (`5.ToString()`)

#C-Sharp #OOP #Performance
