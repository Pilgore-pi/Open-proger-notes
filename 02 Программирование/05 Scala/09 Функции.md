Назад: [[08 Паттерн Matching]]

Scala — это **JVM** язык. И, для совместимости с системой типов **JVM**, все функции в Scala на самом деле представляют собой анонимную реализацию интерфейса **`FunctionX`**, где `X` — может принимать различный номер.

```scala
val func = new Function1[ArgType1, ..., ArgTypeN, RetType]{
	override def apply(arg: ArgType1, ...): RetType = ...
}
```

```scala
val inc: Function1[Int, Int] = x => x + 1
```

Фактически, `inc` имеет тип `Int => Int` или `Function1[Int, Int]`

Синтаксис функций:

```scala
def func(num1: Int, num2: Long): Long = num1 + num2

// func имеет тип (Int, Long) => Long

def printer(a: Int, b: Long, f: (Int, Long) => Long): Unit = {
	print(f(a,b))
}

printer(1, 1_000_000_000, func)
```

Можно объявить функцию без параметров:

```scala
def printer: Unit => println("Hi!")

printer //Hi!
```

Если попытаться написать скобки, возникнет ошибка

> Любой цикл можно записать в виде рекурсии

> Теорема: Любую рекурсию можно переписать в хвостовую

В Scala при вызове функции без параметров можно не писать скобок

Лямбды, синтаксические сокращения, currying, partial functions:
- Лямбда-выражения: `(x: Int) => x + 1`. Тип часто выводится.
- Плейсхолдер-нотация: `_ + 1` — эквивалентно `x => x + 1` при однозначном типе.
- Currying — функции с несколькими группами параметров: `def add(x: Int)(y: Int) = x + y`.
- Частичные функции (`PartialFunction`) — принимают `isDefinedAt` и `apply`, полезны для сопоставления с образцом.

Примеры:

```scala
val f: Int => Int = _ + 1
val sum: Int => Int => Int = x => y => x + y
val add3 = sum(3)
add3(4) // 7
```

Пример currying и применение:

```scala
def multiply(a: Int)(b: Int): Int = a * b
val times2 = multiply(2) _
times2(5) // 10
```

Методы против функции:

- Метод `def m(x: Int): Int = x+1` можно преобразовать в функцию `m _` или автоматически там, где ожидается функция.
- `andThen` и `compose` помогают комбинировать функции:
    - `f.andThen(g)` — сначала `f`, затем `g`
    - `f.compose(g)` — сначала `g`, затем `f

Пример использования коллекций и функций:

```scala
val nums = List(1,2,3,4)
nums.map(_ * 2).filter(_ % 4 == 0) // List(4)
```

Пример частичной функции:

```scala
val pf: PartialFunction[Int, String] = {
  case 1 => "one"
  case 2 => "two"
}
// можно использовать в collect и других местах
List(1,2,3).collect(pf) // List("one","two")
```

Далее: [[10 Try catch]]

#Scala