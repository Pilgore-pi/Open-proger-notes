
Язык SQL имеет довольно простой синтаксис, изучить который не составляет труда. Ключевая проблема в изучении SQL — научиться применять запросы к БД на практике. Ниже представлен чек лист по командам SQL, который описывает множество несложных сценариев работы с БД. Для практики понядобятся готовые базы данных. Скрипты для создания готовых нормализованных баз данных для тестирования содержаться в заметке Тестовые базы данных.

В чек листе будут упомянаться параметры (X, Y, Z...) которые могут принимать любое значение, подходящее для используемой в данный момент таблицы и базы данных, то есть вы определяете сами, какие значения будут принимать эти параметры

## Выборка данных

**Используемые команды:** `SELECT`, `FROM`, `WHERE`, `LIKE`, `GROUP BY`, `HAVING`

### Выборка из одной таблицы

- [ ] Выбрать все строки из таблицы с указанием всех колонок

- [ ] Выбрать конкретные колонки из таблицы. Для некоторых колонок задать псевдоним

- [ ] Выбрать все записи в таблице, где Колонка N равна значению X

- [ ] Выбрать все записи в таблице, где Колонка N равна значению X или Y

- [ ] Выбрать все записи в таблице, где Колонка N не равна значениям X и Y

- [ ] Выбрать из таблицы, в которой есть числовой атрибут, записи, которые < X, но >= Y и не равны Z (X < Z < Y)

- [ ] Выбрать первые пять записей

- [ ] Выбрать все записи, начиная с пятой

- [ ] Выбрать как можно больше записей, начиная с 6-й, но не более 20

- [ ] Получить количество всех записей таблицы, в которых каждое поле не равно `NULL`

- [ ] Выбрать из таблицы с атрибутом типа "Дата" записи, у которых поле с датой находится между D1 и D2

- [ ] Выбрать из таблицы с атрибутом символьного типа записи, у которых символьное поле находится между строкой S1 и строкой S2

- [ ] Выбрать записи, у которых **символьное** поле X может начинаться на любую букву, вторая буква должна быть `c`, третья - любая, последующие буквы могут быть произвольными, как и их количество. Выбор осуществить с учетом регистра и без учета регистра (соответственно `LIKE` и `ILIKE`)

- [ ] Отсортировать записи таблицы сначала по символьному полю S, затем по числовому полю N в рамках одного запроса

- [ ] Отсортировать записи таблицы сначала по числовому полю N по возрастанию, затем по символьному полю S по убыванию 

- [ ] Выбрать все записи с неповторяющимся полем X

- [ ] Выбрать из таблицы атрибут типа "Дата" и вывести все компоненты этой даты в отдельном столбце (год, время года, месяц, неделя, день, половина дня, час, минута, секунда)

- [ ] Из сформированной таблицы с компонентами даты выбрать среднее, минимальное, максимальное и суммарное значение для каждого столбца 

#### Группировка

- [ ] Сгруппировать таблицу по одному из неуникальных полей

- [ ] Сгруппировать таблицу по текстовому атрибуту и вывести для каждой группы количество повторений в исходной таблице

- [ ] Сгруппировать таблицу по неуникальному полю X и найти среднее значение для числовых полей N для каждой группы; вывести саму группу по X, среднее по N минимальное и максимальное значение по полю N

- [ ] Запрос Qi: Сгруппировать таблицу по неуникальному полю X и найти среднее по числовому полю N. Запрос Qo: выбрать те записи из выборки Qi, которые находятся между значениями NUM1 и NUM2, но не равно значению NUM3 (NUM1 < NUM3 < NUM2)

### Соединения таблиц

- [ ] Получить все записи первой таблицы и добавить к ним все записи второй таблицы

- [ ] Получить данные из двух соединенных таблиц (левое соединение)

- [ ] Получить данные из 3 таблиц, соединенных вместе

- [ ] Соединить 3 таблицы, сгруппировать их по полю X и суммировать по числовому полю N (в рамках группы), отсортировать по полю N, затем по X

- [ ] Предыдущий запрос назовем Qp, выбрать из Qp среднее, минимальное, максимальное и сумму по числовому полю N

- [ ] Объединить 2 таблицы, которые имеют отношение друг к другу "многие ко многим"

## Вставка данных

- [ ] Вставить 3 записи в таблицу. Для каждого поля указать значения вручную

- [ ] Вставить 3 записи. Задать только первое поле для каждой записи, остальные заполнить значением по умолчанию

- [ ] Вставить 3 записи. Все значения по умолчанию

- [ ] Вставить записи в таблицу, полученные в запросе к другим таблицам

## Удаление данных

### Удаление записей таблицы

- [ ] Удалить запись, у которого поле X имеет значение Y

- [ ] Удалить все записи, у которых числовое поле N < 10 (или другое условие)

- [ ] Выполнить каскадное удаление записи таблицы, на которую ссылаются на другие(-ая) таблицы(-а)

- [ ] Полностью очистить таблицу

### Удаление столбцов

- [ ] Удалить столбец таблицы

- [ ] Удалить столбец таблицы, на который есть ссылки в других таблицах

### Удаление таблиц

- [ ] Удалить таблицу из базы данных

### Удаление базы данных

## Изменение данных

### Изменение строк

- [ ] В каждой записи таблицы умножить любой числовой атрибут на 3, если он > M

- [ ] Для какого-нибудь символьного столбца, если длина превышает I, усечь лишние символы, чтобы строка была длиной I

### Изменение таблиц

#### Создание таблиц

- [ ] Создать простую таблицу с числовым ID, числовым полем N, символьным полем C, полем даты D. ID должен быть первичным ключом

#### Изменение свойств и структуры таблицы

- [ ] Добавить числовой столбец M

- [ ] Добавить ограничение целостности для столбца M: "M может принимать значения только больше 99"

- [ ] Изменить первичный ключ для таблицы, указав в качестве первичного ключа столбец M

- [ ] Добавить внешний ключ в таблицу

- [ ] Задать правило каскадного удаления (~~)

- [ ] Изменить тип числового столбца M на `varchar`

#DB #SQL
