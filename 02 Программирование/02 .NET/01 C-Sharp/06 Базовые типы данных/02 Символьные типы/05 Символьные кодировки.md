
## Кодировка ASCII

> **ASCII** (American Standard Code for Information Interchange), или Американский стандартный код для обмена информацией, — это исторически первая широко распространенная стандартная кодировка символов, разработанная для унификации обмена данными между компьютерами и телекоммуникационными устройствами



* ASCII — символ < 0x0080 кодируется 1 байтом, другие символы игнорируются
* ASCII(7 bit)
* ANSI

UTF-16 & UTF-32 несовместимы с ASCII, в отличие от UTF-8.

## Кодовые страницы Windows

Существует 2 группы кодовых страниц Windows:
1) OEM — используется для не-юникодных DOS программ (Win32 Console)
2) ANSI — используется для не-юникодных Windows программ

## Класс Encoding

Абстрактный класс, предоставляющий возможности создавать объекты для кодирования и декодирования данных в заданных кодировках.

```csharp
string text = "Hi there!"

Encoding encodingUTF8 = Encoding.UTF8;

// Кодирование в массив байтов:
byte[] encodedBytes;
encodingUTF8.GetBytes(text);

// Показываем значение закодированных байтов
Console.WriteLine("Encoded bytes: " + BitConverter.ToString(encodedBytes));

String decodedString = encodingUTF8.GetString(encodedBytes);
```

```csharp
// Возвращает исходную строку
encodingUTF8.GetString(encodingUTF8.GetBytes("my LITTLE pony"));
```

Другие классы Encoding:

* ASCII (7 bit);
* UTF7;
* UTF8;
* Unicode — little endian UTF-16;
* BigEndianUnicode — big endian UTF-16;
* UTF32;
* Default — кодировка согласно настройкам ОС. Не рекомендуется использовать

Все эти классы стоит использовать из абстрактного класса Encoding, таким образом не создаются лишние экземпляры уже созданных классов.

Полезные методы классов кодирования:

* `Encoding.Convert(srcEncoding, destEncoding, bytes)`
* `конкретная_кодировка.GetHashCode()` — номер кодовой страницы

Если данные передаются порциями, нужно следить за их целостностью и не вызывать методы обработки к части данных. Если программа получит порцию 5 байт, то она декодирует только 2 символа и все полетит. Для этого существуют классы семейства (abstract) Decoder. Данные классы декодируют только те байты, которые можно декодировать, остальные сохраняются в памяти до следующего вызова метода.

Для кодирования аналогично используется Encoder

### Использование дополнительных кодировок

Множество кодировок не входит в стандартную сборку .NET, для использования дополнительных кодировок нужно подключить пакет `System.Text.Encoding.CodePages` из менеджера Nuget

Для использования дополнительных кодировок нужно зарегестрировать провайдер кодовых страниц (статический метод) до использования доп. кодировок

```csharp
using System.Text;

// Регистрация провайдера CodePagesEncodingProvider для включения
// поддержки дополнительных кодовых страниц
Encoding.RegisterProvider(CodePagesEncodingProvider.Instance);

// Создание экземпляра Encoding по номеру кодовой
// страницы Windows-1252 (code page 1252)
Encoding windows1252 = Encoding.GetEncoding(1252);
```

#C-Sharp #Char_types
