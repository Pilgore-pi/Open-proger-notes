Назад: [[05 Классы]]

```scala
abstract class MyList[T]{
	def head: T
	def tail: MyList[T]
}
```

реализация простого списка и ковариантность:
- Часто для списка определяют два случая: пустой список (Empty) и узел (Cons).
- Можно объявить ковариантность `MyList[+T]`, чтобы `MyList[Dog]` был подтипом `MyList[Animal]`.

Пример реализации:

```scala
sealed trait MyList[+T] {
    def head: T
    def tail: MyList[T]
    def isEmpty: Boolean
    def ::[U >: T](elem: U): MyList[U] = Cons(elem, this) // prepend
    def map[B](f: T => B): MyList[B]
    def filter(p: T => Boolean): MyList[T]
}

case object Empty extends MyList[Nothing] {
    def head = throw new NoSuchElementException("head of empty list")
    def tail = throw new NoSuchElementException("tail of empty list")
    def isEmpty = true
    def map[B](f: Nothing => B): MyList[B] = Empty
    def filter(p: Nothing => Boolean): MyList[Nothing] = Empty
}

case class Cons[+T](head: T, tail: MyList[T]) extends MyList[T] {
    def isEmpty = false
    def map[B](f: T => B): MyList[B] = Cons(f(head), tail.map(f))
    def filter(p: T => Boolean): MyList[T] =
        if (p(head)) Cons(head, tail.filter(p)) else tail.filter(p)
}
```

Пример использования:

```scala
val list: MyList[Int] = Cons(1, Cons(2, Empty))
val mapped = list.map(_ * 2) // Cons(2, Cons(4, Empty))
val filtered = list.filter(_ % 2 == 0) // Cons(2, Empty)
```

Далее: [[07 Ленивые вычисления]]

#Scala