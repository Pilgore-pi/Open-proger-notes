
> **Wi-Fi** — это унифицированный стандарт беспроводной передачи данных в сети

- "Wi-Fi" — это не аббревиатура

> **Wi-Fi роутер** или **точка доступа Wi-Fi** — это устройство, которое подключено к сети Интернет через кабель и излучает радиосигнал во всех направлениях, что позволяет использовать Интернет без использования проводов

Так как роутер излучает радиоволны, то возникает проблема наложения волн с другими радиоволнами, источниками которых, например, могут быть сотовые телефоны, рации, радиостанции, вышки и другие точки доступа Wi-Fi. Одним из главных способов р проблема решается ограничением диапазона частоты сигналов Wi-Fi.

На законодательном уровне в большинстве стран мира частота сетей Wi-Fi ограничена и находится в диапазонах:

- 2.4 ГГц
- 5 ГГц
- 6 ГГц для новой версии Wi-Fi 6

Каждый из диапазонов разделен на **каналы**, конкретные частоты, на которых должен работать Wi-Fi

Для 2.4 ГГц существует 14 каналов:

| Номер канала | Частота | Доступность                     |
| ------------ | ------- | ------------------------------- |
| 1            | `2.412` | В большинстве стран, включая РФ |
| 2            | `2.417` | В большинстве стран, включая РФ |
| 3            | `2.422` | В большинстве стран, включая РФ |
| 4            | `2.427` | В большинстве стран, включая РФ |
| 5            | `2.432` | В большинстве стран, включая РФ |
| 6            | `2.437` | В большинстве стран, включая РФ |
| 7            | `2.442` | В большинстве стран, включая РФ |
| 8            | `2.447` | В большинстве стран, включая РФ |
| 9            | `2.452` | В большинстве стран, включая РФ |
| 10           | `2.457` | В большинстве стран, включая РФ |
| 11           | `2.462` | В большинстве стран, включая РФ |
| 12           | `2.467` | В большинстве стран, включая РФ |
| 13           | `2.472` | В большинстве стран, включая РФ |
| 14           | `2.484` | В Японии                        |

Если в одной области работает много точек доступа и при этом все каналы заняты, то могут возникать коллизии и загруженность каналов, что негативно сказывается на пропускной способности

> **Ширина канала** — разность между максимальной и минимальной частотой канала

Ширина канала влияет на качество сигнала и его скорость

## Участие Wi-Fi в моделях OSI и TCP / IP

Wi-Fi роутер выступает в роли посредника между провайдером связи и конечным устройством. Точка доступа также выступает в роли DHCP сервера.

Для провайдера связи все устройства сети Wi-Fi имеют один и тот же IP и MAC-адрес. Но в рамках Wi-Fi сети для каждого устройства роутер определяет свой IP-адрес

Согласно технологии `NAT`, при отправке пакетов данных роутер преобразует IP, MAC-адреса и порты меняя их в публичные. При получении, роутер делает обратное сопоставление адресов

Сопоставление IP-адресов (локальный \<-\> публичный) может происходить по принципу 1 к 1 или 1 ко многим.

> Сопоставление 1 ко многим решает проблему нехватки диапазона IPv4 адресов в Интернете

#### Создание Wi-Fi подключения

В стандарте Wi-Fi используются несколько типов кадров:

- Управляющий кадр — кадры для управления подключением
- Служебный кадр 
- Кадр с данными

1. **Поиск подключений**
    1) **Со стороны точки доступа**. Точка доступа отправляет управляющий **кадр** всем устройствам со след. информацией:
        - MAC-адрес
        - Название точки доступа
        - Данные о шифровании
    2) **Со стороны принимающего устройства**. Принимающее устройство выполняет **пассивное** или **активное** сканирование сети
        - Пассивное сканирование — это переодическая проверка наличия сигнала от Wi-Fi роутера
        - Активное сканирование — принимающее устройство самостоятельно отправляет управляющий кадр всем точкам доступа, чтобы те отправили инфу о себе
2. **Авторизация**. Принимающее устройство для авторизации посылает управляющий кадр роутеру с информацией, необходимой для авторизации. Всего может быть 3 типа авторизации в сети Wi-Fi:
    1. Без пароля — для открытых сетей Wi-Fi
    2. С единым паролем для всех устройств в Wi-Fi сети
    3. С индивидуальными паролями для каждого устройства
3. **Ассоциация**. Принимающее устройство передает роутеру информацию о поддерживаемых методах шифрования
4. **Генерация сессионного ключа**. После успешной авторизации точка доступа генерирует сессионный ключ шифрования, после чего становится доступным безопасный обмен данными

#### Технологии шифрования сетей Wi-Fi

| Технология | Алгоритм шифрования | Безопасность      |
| ---------- | ------------------- | ----------------- |
| WPA3       | AES-GCM (GCMP-128)  | очень безопасен   |
| WPA2       | AES-CCM (CCMP)      | безопасен         |
| WPA        | TKIP                | небезопасен       |
| WEP        | RC4                 | очень небезопасен |
| OWE        | CCMP, GCMP          | безопасен         |
| WAPI       | SMS4                | безопасен         |

#### Обмен кадрами на канальном уровне

Когда роутер посылает данные устройству, он ожидает кадр подтверждения, так как кадр может не дойти до получателя по причине слабого сигнала, загруженности сети или коллизий, возникающих при одновренменной отправке кадра роутеру с разных устройств

Этот механизм работает в обоих направлениях

#Network