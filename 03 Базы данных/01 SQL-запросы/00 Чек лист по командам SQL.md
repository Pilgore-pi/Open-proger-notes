
Язык SQL имеет довольно простой синтаксис, изучить который не составляет труда. Ключевая проблема в изучении SQL — научиться применять запросы к БД на практике. Ниже представлен чек лист по командам SQL, который описывает множество несложных сценариев работы с БД. Для практики понядобятся готовые базы данных. Скрипты для создания готовых баз данных для тестирования содержаться в заметке Тестовые базы данных.

В чек листе будут упомянаться параметры (X, Y, Z...) которые могут принимать любое значение, подходящее для используемой в данный момент таблицы и базы данных, то есть вы определяете сами, какие значения будут принимать эти параметры

## Выборка данных

**Используемые команды:** `SELECT`, `FROM`, `WHERE`, `LIKE`, `GROUP BY`, `HAVING`

### Выборка из одной таблицы

- [ ] Выбрать все строки из таблицы с указанием всех колонок

- [ ] Выбрать конкретные колонки из таблицы. Для некоторых колонок задать псевдоним

- [ ] Выбрать все записи в таблице, где Колонка N равна значению X

- [ ] Выбрать все записи в таблице, где Колонка N равна значению X или Y

- [ ] Выбрать все записи в таблице, где Колонка N не равна значению X и Y

- [ ] Выбрать из таблицы, в которой есть числовой атрибут, записи, которые < X, но >= Y и не равны Z (X < Z < Y)

- [ ] Выбрать все записи, начиная с пятой

- [ ] Выбрать первые пять записей

- [ ] Получить количество всех записей таблицы, в которых каждое поле не равно `NULL`

- [ ] Выбрать из таблицы с атрибутом типа "Дата" записи, у которых поле с датой находится между D1 и D2

- [ ] Выбрать из таблицы с атрибутом символьного типа записи, у которых символьное поле находится между строкой S1 и строкой S2

- [ ] Выбрать записи, у которых **символьное** поле X может начинаться на любую букву, вторая буква должна быть `c`, третья - любая, последующие буквы могут быть произвольными. Выбор осуществить с учетом регистра и без учета регистра (соответственно `ILIKE` и `LIKE`)

- [ ] Отсортировать записи таблицы сначала по символьному полю S, затем по числовому полю N в рамках одного запроса

- [ ] Ограничить количество результатов с LIMIT

- [ ] Выбрать только записи с неповторяющимся полем X

- [ ] Использовать функции обработки даты и времени\*

#### Группировка

- [ ] Применить GROUP BY для группировки по колонке

- [ ] Использовать агрегатные функции: COUNT, SUM, AVG, MIN, MAX

- [ ] Фильтровать сгруппированные данные с HAVING

#### Соединения таблиц

- [ ] Получить данные из двух соединенных таблиц (левое соединение)

- [ ] 

#### Вложенные запросы

- [ ] Использовать подзапросы в SELECT, WHERE, FROM\*

### Выборка из нескольких таблиц


## Вставка данных

## Удаление данных

### Удаление записей таблицы

### Удаление столбцов

### Удаление таблиц

### Удаление базы данных

## Изменение данных

- [ ] В таблице с числовым атрибутом добавить 

### Изменение строк

### Изменение столбцов

### Изменение таблиц

----

# БОЛЕЕ КОНКРЕТНЫЙ ЧЕК-ЛИСТ

Вот более конкретные задачи для упражнений по каждой категории SQL команд в PostgreSQL.

## Выборка данных (SELECT, WHERE, GROUP BY и др.)

- Отсортировать сотрудников по фамилии в алфавитном порядке.
- Показать первые 10 сотрудников с самой высокой зарплатой.
- Пропустить первые 5 сотрудников и показать следующие 10 из результата.
- Найти количество сотрудников в каждой должности (GROUP BY должность).
- Посчитать среднюю зарплату по отделу (GROUP BY department).
- Показать отделы, где средняя зарплата больше 60000 (HAVING).
- Соединить таблицы employees и departments по department_id и вывести имя сотрудника и название отдела.
- Найти сотрудников, у которых зарплата выше среднего по компании (подзапрос).
- Вывести список уникальных должностей в таблице employees.
- Найти сотрудников, у которых дата приема работы за последний год.

## Добавление новых записей (INSERT)

- Вставить нового сотрудника с именем 'Иван Иванов', возрастом 28 и должностью 'Tester'.
- Вставить сотрудника, указав только имя и должность, оставив остальные поля по умолчанию.
- Вставить сразу трех новых сотрудников одной командой.
- Вставить сотрудника и вернуть id этого сотрудника с помощью RETURNING.
- Вставить сотрудников, данные о которых взяты из другой таблицы interns.
- Вставить нового сотрудника или обновить его данные, если такой сотрудник с таким email уже существует (ON CONFLICT).

## Удаление записей (DELETE)

- Удалить всех сотрудников, у которых возраст меньше 25.
- Удалить сотрудника с конкретным id = 1001.
- Удалить сотрудников, у которых зарплата ниже минимального прожиточного минимума, и вернуть их имена.
- Удалить сотрудников, связанных с определенным отделом, используя JOIN с таблицей departments.
- Очистить таблицу временных сотрудников (TRUNCATE).

## Изменение существующих записей (UPDATE)

- Увеличить зарплату всех сотрудников на 5000.
- Обновить должность конкретного сотрудника с id 123 на 'Senior Developer'.
- Изменить возраст и email сотрудника с именем 'Анна Смирнова'.
- Обновить зарплаты всех сотрудников в отделе 'IT' уменьшить на 10%.
- Обновить сотрудников, у которых дата приема работы раньше 2010 года, установив статус 'Veteran'.
- Обновить сотрудников, подбирая значения из другой таблицы (например, синхронизировать департаменты).

#DB #SQL
