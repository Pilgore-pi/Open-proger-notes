Код в формах разделен на 2 логических пространства: Клиент и Сервер. Каждая переменная или функция относится к клиенту, к серверу или к клиенту и серверу.

Ранее прямого разделения на Сервер и Клиент не было. Ранее существовал только толстый клиент, но с выходом версии 8.2 появился **тонкий клиент**, который уменьшил количество вычисляемых операций на стороне клиента.

Каждая из директив компиляции определяет, где будет выполняться процедура или функция: на клиенте или на сервере, и как будет происходить взаимодействие с контекстом формы. Контекст формы находится на клиенте ~И НА СЕРВЕРЕ*

Доступность вызова методов одних из других определяется этой схемой:

- `&НаКлиенте`
    - `&НаСервере`
        - `&НаКлиентеНаСервере`~
            - `&НаСервереБезКонтекста`
                - `&НаКлиентеНаСервереБезКонтекста`

## Где доступны директивы

| Директива                         | Где доступно                       |
| --------------------------------- | ---------------------------------- |
| `&НаКлиенте`                      | Модули форм, общие модули, команды |
| `&НаСервере`                      | Модули форм, общие модули          |
| `&НаКлиентеНаСервере`             | Модули форм                        |
| `&НаСервереБезКонтекста`          | Модули форм                        |
| `&НаКлиентеНаСервереБезКонтекста` | Модули форм                        |

Из клиента можно вызывать любую функцию, а, например, из `&НаСервереБезКонтекста` можно вызывать только `&НаКлиентеНаСервереБезКонтекста`

>**Серверный вызов** – это передача какой-то информации с клиентской части «1С:Предприятие 8» на серверную часть с целью вернуть обратно некий набор данных. Сервер не может инициировать запрос к клиенту

При совершении серверного вызова можно увидеть обновление счетчика "Текущие вызовы" в левой нижней окна приложения

| Сущность кода с аннотацией              | Доступность | Сущность кода или источник данных |
| --------------------------------------- | ----------- | --------------------------------- |
| `&НаСервере` любая сущность             | Есть        | Данные формы, база данных         |
| `&НаКлиенте` любая сущность             | Есть        | Данные формы                      |
| `&НаКлиентеНаСервере` любая сущность    | Есть        | Данные формы                      |
| `&НаСервереБезКонтекста` любая сущность | Есть        | База данных                       |
| `&НаКлиентеНаСервереБезКонтекста` метод | Есть        | Только параметры метода           |
| Метод `&НаКлиенте`                      | Нет         | переменная модуля `&НаСервере`    |
| Метод `&НаСервере`                      | Нет         | переменная модуля `&НаКлиенте`    |

>В общих модулях доступны только 2 директивы: `&НаКлиенте` и `&НаСервере`. В общих модулях контекст формы отсутствует~~

* В правой колонке под "базой данных" подразумевается вся информация в базе данных, объекты конфигурации и метаданные конфигурации. Клиент может получить данные из БД только через серверные вызовы.

Директива `&НаСервере` **используется по умолчанию** и подразумевает выполнение кода на сервере, при этом на сервер передается весь контекст формы (для общих форм контекст не передается~).

При использовании директивы `&НаСервереБезКонтекста` отправка контекста не совершается, что позволяет совершать меньше операций и занимать меньше памяти. Однако можно передать необходимые данные через параметры серверного метода

Рекомендуется совершать минимальное количество серверных вызовов и избегать их выполнение в цикле. Обычно, можно подготовить данные для отправки одним пакетом, чтобы не плодить много вызовов.

Метод с директивой `&НаКлиентеНаСервереБезКонтекста` полностью аналогичен двум таким же методам с директивами: `&НаКлиенте` и `&НаСервереБезКонтекста`. Метод с такой директивой может взаимодействовать с общими модулями

* Нельзя применять несколько директив к методу и объявлять одинаковые методы с разными директивами

#1С #1С/Язык_программирования